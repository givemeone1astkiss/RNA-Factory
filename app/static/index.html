<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RNA-Factory</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet">
    <link href="/static/css/bpfold.css" rel="stylesheet">
    <link href="/static/css/ufold.css" rel="stylesheet">
    <link href="/static/css/mxfold2.css" rel="stylesheet">
    <link href="/static/css/rnaformer.css" rel="stylesheet">
    <link href="/static/css/rnamigos2.css" rel="stylesheet">
    <link href="/static/css/mol2aptamer.css" rel="stylesheet">
    <link href="/static/css/rnaflow.css" rel="stylesheet">
    <link href="/static/css/rnaframeflow.css" rel="stylesheet">
    <link href="/static/css/reformer.css" rel="stylesheet">
    <link href="/static/css/standard-input.css" rel="stylesheet">
</head>
<body>
    <!-- Loading Page -->
    <div class="loading-page" id="loadingPage">
        <div class="loading-particles">
            <div class="loading-particle"></div>
            <div class="loading-particle"></div>
            <div class="loading-particle"></div>
            <div class="loading-particle"></div>
            <div class="loading-particle"></div>
            <div class="loading-particle"></div>
        </div>
        <div class="loading-content">
            <div class="loading-logo">
                <i class="fas fa-dna"></i>
            </div>
        </div>
    </div>

    <!-- Top Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">
                <div class="brand-logo">
                    <i class="fas fa-dna"></i>
                    <span>RNA-Factory</span>
                </div>
            </a>
            <div class="navbar-nav">
                <div class="github-toggle">
                    <button class="btn btn-outline-light btn-sm" id="githubButton" onclick="openGitHub()">
                        <i class="fab fa-github"></i>
                        <span>GitHub</span>
                    </button>
                </div>
                <div class="ai-assistant-toggle">
                    <button class="btn btn-outline-light btn-sm" id="aiAssistantToggle" onclick="toggleAIAssistant()">
                        <i class="fas fa-robot"></i>
                        <span>AI Assistant</span>
                    </button>
                </div>
                <div class="theme-toggle">
                    <button class="btn btn-outline-light btn-sm" id="themeToggle" onclick="toggleTheme()">
                        <i class="fas fa-moon" id="themeIcon"></i>
                        <span id="themeText">Dark Mode</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Banner Section -->
    <section class="banner-section" id="bannerSection">
        <div class="banner-background">
        </div>
        <div class="banner-particles">
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
            <div class="particle"></div>
        </div>
        <div class="banner-content">
            <div class="banner-text">
                <h1 class="banner-title">RNA-Factory</h1>
                <p class="banner-subtitle">Advanced RNA Analysis Platform</p>
                <p class="banner-description">Discover the power of AI-driven RNA research and analysis</p>
            </div>
        </div>
    </section>

    <div class="main-container">
        <!-- AI Assistant Sidebar -->
        <div class="ai-sidebar" id="aiSidebar">
            <div class="ai-sidebar-header">
                <div class="ai-header-content">
                    <div class="ai-title-section">
                        <i class="fas fa-robot"></i>
                        <h5>AI Assistant</h5>
                    </div>
                    <div class="ai-header-actions">
                        <div class="ai-status">
                            <span class="status-indicator" id="aiStatusIndicator"></span>
                            <span class="status-text" id="aiStatusText">Ready</span>
                        </div>
                        <button class="ai-close-btn" onclick="toggleAIAssistant()" title="Close AI Assistant">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="ai-chat-container">
                <div class="ai-chat-messages" id="aiChatMessages">
                    <div class="ai-message ai-assistant">
                        <div class="message-avatar">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="message-content">
                            <p>Hello! I'm your AI assistant powered by DeepSeek. I can help you with RNA analysis, model explanations, and answer your questions about bioinformatics. How can I assist you today?</p>
                        </div>
                    </div>
                </div>
                
                <div class="ai-chat-input">
                    <div class="ai-input-container">
                        <textarea class="ai-input-field" id="aiMessageInput" placeholder="Type your message here..." rows="1"></textarea>
                        <button class="ai-send-btn" id="aiSendButton" onclick="sendAIMessage()" title="Send Message">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div class="sidebar">
            <div class="model-tabs" id="modelTabs">
                <!-- Model tabs will be generated dynamically via JavaScript -->
            </div>
        </div>

        <div class="main-content">
            <div class="content-header" id="contentHeader">
                <div class="header-content">
                    <h1 id="currentModelTitle">Welcome to RNA-Factory</h1>
                    <p id="currentModelDesc" class="text-muted">Please select a model from the left sidebar to begin analysis</p>
                    
                    <!-- Model Architecture Section -->
                    <div class="model-architecture" id="modelArchitecture" style="display: none;">
                        <div class="architecture-header">
                            <i class="fas fa-project-diagram"></i>
                            <h6>Model Architecture</h6>
                        </div>
                        <div class="architecture-content">
                            <div class="architecture-image-container">
                                <img id="architectureImage" src="" alt="Model Architecture" style="display: none;">
                                <div id="architecturePlaceholder" class="architecture-placeholder">
                                    <i class="fas fa-image"></i>
                                    <p>No architecture image available</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Model Links Section -->
                    <div class="model-links" id="modelLinks" style="display: none;">
                        <div class="links-container">
                            <a href="#" id="githubLink" class="model-link github-link" target="_blank" style="display: none;">
                                <i class="fab fa-github"></i>
                                <span>GitHub Repository</span>
                            </a>
                            <a href="#" id="paperLink" class="model-link paper-link" target="_blank" style="display: none;">
                                <i class="fas fa-file-alt"></i>
                                <span>Research Paper</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Section -->
            <div class="input-section" id="inputSection" style="display: none;">
                <div class="input-card">
                    <div class="card-header">
                        <i class="fas fa-upload"></i>
                        <h5>Input Data</h5>
                    </div>
                    <div class="card-body">
                        <div class="input-methods">
                            <!-- RNA Sequences Input Section -->
                            <div class="input-method" id="rnaSequencesInput">
                                <div class="method-header">
                                    <i class="fas fa-dna"></i>
                                    <h6>RNA Sequences</h6>
                                </div>
                                <div class="standard-input-area single-block" id="rnaSequencesInputArea">
                                    <div class="unified-input-area" id="rnaSequencesUnifiedInput">
                                        <div class="input-placeholder" id="rnaSequencesPlaceholder">
                                            <i class="fas fa-edit"></i>
                                            <p>Click to enter RNA sequences or drag files here</p>
                                            <small id="fileAcceptInfo">FASTA, TXT supported</small>
                                        </div>
                                        <textarea id="inputText" rows="6" placeholder="Enter SMILES strings&#10;Example:&#10;AGUCUCUA&#10;CGAUCGUACGUACGU" style="display: none;"></textarea>
                                        <input type="file" id="inputFile" accept=".fasta,.fa,.txt" style="display: none;">
                                    </div>
                                </div>
                            </div>

                            <!-- Structure Prediction Options -->
                            <div class="input-method bpfold-options" id="bpfoldOptions" style="display: none;">
                                <div class="method-header">
                                    <i class="fas fa-cog"></i>
                                    <h6>Options & Settings</h6>
                                </div>
                                <div class="options-area">
                                    <div class="form-group">
                                        <label class="form-check-label">
                                            <input type="checkbox" id="ignoreNonCanonical" class="form-check-input">
                                            <span class="checkmark"></span>
                                            <span id="optionLabel">Ignore non-canonical base pairs</span>
                                        </label>
                                    </div>
                                </div>
                            </div>

                            <!-- RNAmigos2 Specific Input Area -->
                            <div class="input-method rnamigos2-input" id="rnamigos2Input" style="display: none;">
                                <!-- Structure Input Section -->
                                <div class="rnamigos2-section">
                                    <div class="method-header">
                                        <i class="fas fa-cube"></i>
                                        <h6>RNA Structure</h6>
                                    </div>
                                    <div class="standard-input-area single-block" id="rnamigos2StructureInputArea">
                                        <div class="unified-input-area" id="rnamigos2StructureUnifiedInput">
                                            <div class="input-placeholder" id="rnamigos2StructurePlaceholder">
                                                <i class="fas fa-cloud-upload-alt"></i>
                                                <p>Click or drag mmCIF files here</p>
                                                <small>CIF, mmCIF supported</small>
                                            </div>
                                            <textarea id="rnamigos2StructureText" rows="6" placeholder="Enter mmCIF content or drag files here&#10;Example:&#10;data_example&#10;_entry.id example&#10;_struct.title 'RNA Structure'" style="display: none;"></textarea>
                                            <input type="file" id="rnamigos2FileInput" accept=".cif,.mmcif" style="display: none;">
                                        </div>
                                    </div>
                                </div>

                                <!-- Binding Site Section -->
                                <div class="rnamigos2-section">
                                    <div class="method-header">
                                        <i class="fas fa-bullseye"></i>
                                        <h6>Binding Site Residues</h6>
                                    </div>
                                    <div class="standard-input-area single-block" id="rnamigos2ResiduesInputArea">
                                        <div class="unified-input-area" id="rnamigos2ResiduesUnifiedInput">
                                            <div class="input-placeholder" id="rnamigos2ResiduesPlaceholder">
                                                <i class="fas fa-edit"></i>
                                                <p>Click to enter binding site residues or drag files here</p>
                                                <small>TXT supported</small>
                                            </div>
                                            <textarea id="rnamigos2Residues" rows="5" placeholder="Enter residue identifiers, one per line or comma-separated&#10;Example:&#10;A.20&#10;A.19&#10;A.18" style="display: none;"></textarea>
                                            <input type="file" id="rnamigos2ResiduesFileInput" accept=".txt" style="display: none;">
                                        </div>
                                    </div>
                                </div>

                                <!-- Ligands Section -->
                                <div class="rnamigos2-section smiles-section">
                                    <div class="method-header">
                                        <i class="fas fa-flask"></i>
                                        <h6>Ligand SMILES</h6>
                                    </div>
                                    <div class="standard-input-area single-block" id="rnamigos2SmilesInputArea">
                                        <div class="unified-input-area" id="rnamigos2SmilesUnifiedInput">
                                            <div class="input-placeholder" id="rnamigos2SmilesPlaceholder">
                                                <i class="fas fa-edit"></i>
                                                <p>Click to enter SMILES or drag files here</p>
                                                <small>TXT supported</small>
                                            </div>
                                            <textarea id="rnamigos2SmilesText" rows="6" placeholder="Enter SMILES strings&#10;Example:&#10;CCC[S@](=O)c1ccc2&#10;O=C(O)[C@@H](O)c1ccccc1" style="display: none;"></textarea>
                                            <input type="file" id="rnamigos2SmilesFileInput" accept=".txt" style="display: none;">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Reformer Specific Input Area -->
                            <div class="input-method reformer-input" id="reformerInput" style="display: none;">
                                <!-- RNA Sequence Input Section -->
                                <div class="input-method">
                                    <div class="method-header">
                                        <i class="fas fa-dna"></i>
                                        <h6>cDNA Sequence</h6>
                                    </div>
                                    <div class="standard-input-area single-block" id="reformerSequenceInputArea">
                                        <div class="unified-input-area" id="reformerSequenceUnifiedInput">
                                            <div class="input-placeholder" id="reformerSequencePlaceholder">
                                                <i class="fas fa-edit"></i>
                                                <p>Click to enter cDNA sequence or drag files here</p>
                                                <small>FASTA, TXT supported</small>
                                            </div>
                                            <textarea id="reformerSequence" rows="6" placeholder="Enter cDNA sequence (ATCG characters only)&#10;Example:&#10;ATGCGATCGATCGATCGA&#10;TTCGAATTCGAATTCGAA" style="display: none;"></textarea>
                                            <input type="file" id="reformerSequenceFileInput" accept=".fasta,.fa,.txt" style="display: none;">
                                        </div>
                                    </div>
                                </div>

                                <!-- Prediction Parameters Section -->
                                <div class="input-method">
                                    <div class="method-header">
                                        <i class="fas fa-cogs"></i>
                                        <h6>Options & Settings</h6>
                                    </div>
                                    <div class="reformer-parameters">
                                        <div class="reformer-parameter">
                                            <label for="reformerRbpName">RBP Name</label>
                                            <select id="reformerRbpName" class="form-select">
                                                <option value="AARS">AARS</option>
                                                <option value="AATF">AATF</option>
                                                <option value="ABCF1">ABCF1</option>
                                                <option value="AGGF1">AGGF1</option>
                                                <option value="AKAP1">AKAP1</option>
                                                <option value="AKAP8L">AKAP8L</option>
                                                <option value="APOBEC3C">APOBEC3C</option>
                                                <option value="AQR">AQR</option>
                                                <option value="BCCIP">BCCIP</option>
                                                <option value="BCLAF1">BCLAF1</option>
                                                <option value="BUD13">BUD13</option>
                                                <option value="CDC40">CDC40</option>
                                                <option value="CPEB4">CPEB4</option>
                                                <option value="CPSF6">CPSF6</option>
                                                <option value="CSTF2">CSTF2</option>
                                                <option value="CSTF2T">CSTF2T</option>
                                                <option value="DDX21">DDX21</option>
                                                <option value="DDX24">DDX24</option>
                                                <option value="DDX3X">DDX3X</option>
                                                <option value="DDX42">DDX42</option>
                                                <option value="DDX51">DDX51</option>
                                                <option value="DDX52">DDX52</option>
                                                <option value="DDX55">DDX55</option>
                                                <option value="DDX59">DDX59</option>
                                                <option value="DDX6">DDX6</option>
                                                <option value="DGCR8">DGCR8</option>
                                                <option value="DHX30">DHX30</option>
                                                <option value="DKC1">DKC1</option>
                                                <option value="DROSHA">DROSHA</option>
                                                <option value="EFTUD2">EFTUD2</option>
                                                <option value="EIF3D">EIF3D</option>
                                                <option value="EIF3G">EIF3G</option>
                                                <option value="EIF3H">EIF3H</option>
                                                <option value="EIF4G2">EIF4G2</option>
                                                <option value="EWSR1">EWSR1</option>
                                                <option value="EXOSC5">EXOSC5</option>
                                                <option value="FAM120A">FAM120A</option>
                                                <option value="FASTKD2">FASTKD2</option>
                                                <option value="FKBP4">FKBP4</option>
                                                <option value="FMR1">FMR1</option>
                                                <option value="FTO">FTO</option>
                                                <option value="FUBP3">FUBP3</option>
                                                <option value="FUS">FUS</option>
                                                <option value="FXR1">FXR1</option>
                                                <option value="FXR2">FXR2</option>
                                                <option value="G3BP1">G3BP1</option>
                                                <option value="GEMIN5">GEMIN5</option>
                                                <option value="GNL3">GNL3</option>
                                                <option value="GPKOW">GPKOW</option>
                                                <option value="GRSF1">GRSF1</option>
                                                <option value="GRWD1">GRWD1</option>
                                                <option value="GTF2F1">GTF2F1</option>
                                                <option value="HLTF">HLTF</option>
                                                <option value="HNRNPA1">HNRNPA1</option>
                                                <option value="HNRNPC">HNRNPC</option>
                                                <option value="HNRNPK">HNRNPK</option>
                                                <option value="HNRNPL">HNRNPL</option>
                                                <option value="HNRNPM">HNRNPM</option>
                                                <option value="HNRNPU">HNRNPU</option>
                                                <option value="HNRNPUL1">HNRNPUL1</option>
                                                <option value="IGF2BP1">IGF2BP1</option>
                                                <option value="IGF2BP2">IGF2BP2</option>
                                                <option value="IGF2BP3">IGF2BP3</option>
                                                <option value="ILF3">ILF3</option>
                                                <option value="KHDRBS1">KHDRBS1</option>
                                                <option value="KHSRP">KHSRP</option>
                                                <option value="LARP4">LARP4</option>
                                                <option value="LARP7">LARP7</option>
                                                <option value="LIN28B">LIN28B</option>
                                                <option value="LSM11">LSM11</option>
                                                <option value="MATR3">MATR3</option>
                                                <option value="METAP2">METAP2</option>
                                                <option value="MTPAP">MTPAP</option>
                                                <option value="NCBP2">NCBP2</option>
                                                <option value="NIP7">NIP7</option>
                                                <option value="NIPBL">NIPBL</option>
                                                <option value="NKRF">NKRF</option>
                                                <option value="NOL12">NOL12</option>
                                                <option value="NOLC1">NOLC1</option>
                                                <option value="NONO">NONO</option>
                                                <option value="NPM1">NPM1</option>
                                                <option value="NSUN2">NSUN2</option>
                                                <option value="PABPC4">PABPC4</option>
                                                <option value="PABPN1">PABPN1</option>
                                                <option value="PCBP1">PCBP1</option>
                                                <option value="PCBP2">PCBP2</option>
                                                <option value="PHF6">PHF6</option>
                                                <option value="POLR2G">POLR2G</option>
                                                <option value="PPIG">PPIG</option>
                                                <option value="PPIL4">PPIL4</option>
                                                <option value="PRPF4">PRPF4</option>
                                                <option value="PRPF8">PRPF8</option>
                                                <option value="PTBP1">PTBP1</option>
                                                <option value="PUM1">PUM1</option>
                                                <option value="PUM2">PUM2</option>
                                                <option value="PUS1">PUS1</option>
                                                <option value="QKI">QKI</option>
                                                <option value="RBFOX2">RBFOX2</option>
                                                <option value="RBM15">RBM15</option>
                                                <option value="RBM22">RBM22</option>
                                                <option value="RBM5">RBM5</option>
                                                <option value="RPS11">RPS11</option>
                                                <option value="RPS3">RPS3</option>
                                                <option value="SAFB">SAFB</option>
                                                <option value="SAFB2">SAFB2</option>
                                                <option value="SBDS">SBDS</option>
                                                <option value="SDAD1">SDAD1</option>
                                                <option value="SERBP1">SERBP1</option>
                                                <option value="SF3A3">SF3A3</option>
                                                <option value="SF3B1">SF3B1</option>
                                                <option value="SF3B4">SF3B4</option>
                                                <option value="SFPQ">SFPQ</option>
                                                <option value="SLBP">SLBP</option>
                                                <option value="SLTM">SLTM</option>
                                                <option value="SMNDC1">SMNDC1</option>
                                                <option value="SND1">SND1</option>
                                                <option value="SRSF1">SRSF1</option>
                                                <option value="SRSF7">SRSF7</option>
                                                <option value="SRSF9">SRSF9</option>
                                                <option value="SSB">SSB</option>
                                                <option value="STAU2">STAU2</option>
                                                <option value="SUB1">SUB1</option>
                                                <option value="SUGP2">SUGP2</option>
                                                <option value="SUPV3L1">SUPV3L1</option>
                                                <option value="TAF15">TAF15</option>
                                                <option value="TARDBP">TARDBP</option>
                                                <option value="TBRG4">TBRG4</option>
                                                <option value="TIA1">TIA1</option>
                                                <option value="TIAL1">TIAL1</option>
                                                <option value="TRA2A">TRA2A</option>
                                                <option value="TROVE2">TROVE2</option>
                                                <option value="U2AF1">U2AF1</option>
                                                <option value="U2AF2">U2AF2</option>
                                                <option value="UCHL5">UCHL5</option>
                                                <option value="UPF1">UPF1</option>
                                                <option value="UTP18">UTP18</option>
                                                <option value="UTP3">UTP3</option>
                                                <option value="WDR3">WDR3</option>
                                                <option value="WDR43">WDR43</option>
                                                <option value="WRN">WRN</option>
                                                <option value="XPO5">XPO5</option>
                                                <option value="XRCC6">XRCC6</option>
                                                <option value="XRN2">XRN2</option>
                                                <option value="YBX3">YBX3</option>
                                                <option value="YWHAG">YWHAG</option>
                                                <option value="ZC3H11A">ZC3H11A</option>
                                                <option value="ZC3H8">ZC3H8</option>
                                                <option value="ZNF622">ZNF622</option>
                                                <option value="ZNF800">ZNF800</option>
                                                <option value="ZRANB2">ZRANB2</option>
                                            </select>
                                        </div>
                                        <div class="reformer-parameter">
                                            <label for="reformerCellLine">Cell Line</label>
                                            <select id="reformerCellLine" class="form-select">
                                                <option value="HepG2">HepG2</option>
                                                <option value="K562">K562</option>
                                                <option value="adrenal_gland">Adrenal Gland</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- CoPRA Specific Input Area -->
                            <div class="input-method copra-input" id="copraInput" style="display: none;">
                                <!-- Protein Sequence Input Section -->
                                <div class="input-method">
                                    <div class="method-header">
                                        <i class="fas fa-dna"></i>
                                        <h6>Protein Sequence</h6>
                                    </div>
                                    <div class="standard-input-area single-block" id="copraProteinInputArea">
                                        <div class="unified-input-area" id="copraProteinUnifiedInput">
                                            <div class="input-placeholder" id="copraProteinPlaceholder">
                                                <i class="fas fa-edit"></i>
                                                <p>Click to enter protein sequence or drag files here</p>
                                                <small>FASTA, TXT supported</small>
                                            </div>
                                            <textarea id="copraProteinSequence" rows="4" placeholder="Enter protein sequence (single letter amino acid codes)&#10;Example:&#10;MKTVRQERLKSIVRILERSKEPVSGAQLAEELSVSRQVIVQDIAYLRSLGYNIVATPRGYVLAGG&#10;ACDEFGHIKLMNPQRSTVWY" style="display: none;"></textarea>
                                            <input type="file" id="copraProteinFileInput" accept=".fasta,.fa,.txt" style="display: none;">
                                        </div>
                                    </div>
                                </div>

                                <!-- RNA Sequence Input Section -->
                                <div class="input-method">
                                    <div class="method-header">
                                        <i class="fas fa-dna"></i>
                                        <h6>RNA Sequence</h6>
                                    </div>
                                    <div class="standard-input-area single-block" id="copraRnaInputArea">
                                        <div class="unified-input-area" id="copraRnaUnifiedInput">
                                            <div class="input-placeholder" id="copraRnaPlaceholder">
                                                <i class="fas fa-edit"></i>
                                                <p>Click to enter RNA sequence or drag files here</p>
                                                <small>FASTA, TXT supported</small>
                                            </div>
                                            <textarea id="copraRnaSequence" rows="4" placeholder="Enter RNA sequence (A, U, G, C only)&#10;Example:&#10;GGGAAACCCUUU&#10;AUCGAUCGAUCGAUCG" style="display: none;"></textarea>
                                            <input type="file" id="copraRnaFileInput" accept=".fasta,.fa,.txt" style="display: none;">
                                        </div>
                                    </div>
                                </div>

                                <!-- Analysis Parameters Section -->
                                <div class="input-method">
                                    <div class="method-header">
                                        <i class="fas fa-cogs"></i>
                                        <h6>Options & Settings</h6>
                                    </div>
                                    <div class="copra-parameters">
                                        <div class="copra-parameter">
                                            <label for="copraConfidenceThreshold">Confidence Threshold</label>
                                            <select id="copraConfidenceThreshold" class="form-select">
                                                <option value="0.5">Low (0.5)</option>
                                                <option value="0.7" selected>Medium (0.7)</option>
                                                <option value="0.8">High (0.8)</option>
                                                <option value="0.9">Very High (0.9)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- RNAFlow Specific Input Area -->
                            <div class="rnaflow-input" id="rnaflowInput" style="display: none;">
                                <!-- Protein Sequence Input Section -->
                                <div class="rnaflow-section input-method">
                                    <div class="method-header">
                                        <i class="fas fa-dna"></i>
                                        <h6>Protein Sequence</h6>
                                    </div>
                                    <div class="standard-input-area single-block" id="rnaflowProteinInputArea">
                                        <div class="unified-input-area" id="rnaflowProteinUnifiedInput">
                                            <div class="input-placeholder" id="rnaflowProteinPlaceholder">
                                                <i class="fas fa-edit"></i>
                                                <p>Click to enter protein sequence or drag files here</p>
                                                <small>FASTA, TXT supported</small>
                                            </div>
                                            <textarea id="rnaflowProteinSequence" rows="4" placeholder="Enter protein sequence&#10;Example:&#10;MKLLILTCLVAVALARPKHPIKHQGLPQEVLNENLLRFFVAPFPEVFGKEKVNEL" style="display: none;"></textarea>
                                            <input type="file" id="rnaflowProteinFileInput" accept=".fasta,.fa,.txt" style="display: none;">
                                        </div>
                                    </div>
                                </div>

                                <!-- RNA Design Parameters Section -->
                                <div class="rnaflow-section">
                                    <div class="method-header">
                                        <i class="fas fa-cogs"></i>
                                        <h6>Options & Settings</h6>
                                    </div>
                                    <div class="rnaflow-parameters">
                                        <div class="rnaflow-parameter">
                                            <label for="rnaflowRnaLength">RNA Length</label>
                                            <input type="number" id="rnaflowRnaLength" min="5" max="200" value="20" placeholder="20">
                                        </div>
                                        <div class="rnaflow-parameter">
                                            <label for="rnaflowNumSamples">Number of Samples</label>
                                            <input type="number" id="rnaflowNumSamples" min="1" max="10" value="3" placeholder="3">
                                        </div>
                                        </div>
                                    </div>
                                </div>

                            <!-- Mol2Aptamer Specific Input Area -->
                            <div class="mol2aptamer-input" id="mol2aptamerInput" style="display: none;">
                                <!-- SMILES Input Section -->
                                <div class="mol2aptamer-section input-method">
                                    <div class="method-header">
                                        <i class="fas fa-flask"></i>
                                        <h6>Ligand SMILES</h6>
                                    </div>
                                    <div class="standard-input-area single-block" id="mol2aptamerSmilesInputArea">
                                        <div class="unified-input-area" id="mol2aptamerSmilesUnifiedInput">
                                            <div class="input-placeholder" id="mol2aptamerSmilesPlaceholder">
                                                <i class="fas fa-edit"></i>
                                                <p>Click to enter SMILES or drag files here</p>
                                                <small>TXT supported</small>
                                            </div>
                                            <textarea id="mol2aptamerSmiles" rows="4" placeholder="Enter SMILES string&#10;Example:&#10;CC1=CC2=C(CC1)C(=CC3=C2C(=CO3)C)C" style="display: none;"></textarea>
                                            <input type="file" id="mol2aptamerSmilesFileInput" accept=".txt" style="display: none;">
                                        </div>
                                    </div>
                                </div>

                                <!-- Generation Parameters -->
                                <div class="mol2aptamer-section input-method">
                                    <div class="method-header">
                                        <i class="fas fa-cog"></i>
                                        <h6>Options & Settings</h6>
                                    </div>
                                    <div class="parameters-grid">
                                        <div class="parameter-group">
                                            <label for="mol2aptamerNumSequences">Number of Sequences</label>
                                            <input type="number" id="mol2aptamerNumSequences" value="10" min="1" max="100" class="form-control">
                                        </div>
                                        <div class="parameter-group">
                                            <label for="mol2aptamerMaxLength">Max Length</label>
                                            <input type="number" id="mol2aptamerMaxLength" value="50" min="10" max="200" class="form-control">
                                        </div>
                                        <div class="parameter-group">
                                            <label for="mol2aptamerTemperature">Temperature</label>
                                            <input type="number" id="mol2aptamerTemperature" value="1.0" min="0.1" max="2.0" step="0.1" class="form-control">
                                        </div>
                                        <div class="parameter-group">
                                            <label for="mol2aptamerTopK">Top-K</label>
                                            <input type="number" id="mol2aptamerTopK" value="50" min="1" max="100" class="form-control">
                                        </div>
                                        <div class="parameter-group">
                                            <label for="mol2aptamerTopP">Top-P</label>
                                            <input type="number" id="mol2aptamerTopP" value="0.9" min="0.1" max="1.0" step="0.1" class="form-control">
                                        </div>
                                        <div class="parameter-group">
                                            <label for="mol2aptamerStrategy">Sampling Strategy</label>
                                            <select id="mol2aptamerStrategy" class="form-control">
                                                <option value="greedy">Greedy</option>
                                                <option value="top_k">Top-K</option>
                                                <option value="top_p">Top-P</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- RNA-FrameFlow Specific Input Area -->
                            <div class="rnaframeflow-input" id="rnaframeflowInput" style="display: none;">
                                <!-- Structure Generation Parameters Section -->
                                <div class="rnaframeflow-section input-method">
                                    <div class="method-header">
                                        <i class="fas fa-cog"></i>
                                        <h6>Options & Settings</h6>
                                    </div>
                                    <div class="parameters-grid">
                                        <div class="parameter-group">
                                            <label for="rnaframeflowSequenceLength">Structure Length</label>
                                            <input type="number" id="rnaframeflowSequenceLength" min="10" max="200" value="50" placeholder="50">
                                            <small>Length of RNA structure to generate (10-200 residues)</small>
                                        </div>
                                        <div class="parameter-group">
                                            <label for="rnaframeflowNumSequences">Number of Structures</label>
                                            <input type="number" id="rnaframeflowNumSequences" min="1" max="20" value="5" placeholder="5">
                                            <small>Number of 3D structures to generate (1-20 structures)</small>
                                        </div>
                                        <div class="parameter-group">
                                            <label for="rnaframeflowTemperature">Temperature</label>
                                            <input type="number" id="rnaframeflowTemperature" min="0.1" max="2.0" step="0.1" value="1.0" placeholder="1.0">
                                            <small>Sampling temperature for structure generation (0.1-2.0)</small>
                                        </div>
                                        <div class="parameter-group">
                                            <label for="rnaframeflowSeed">Random Seed</label>
                                            <input type="number" id="rnaframeflowSeed" min="0" max="999999" value="" placeholder="Random">
                                            <small>Random seed for reproducible results (leave empty for random)</small>
                                        </div>
                                        <div class="parameter-group">
                                            <label for="rnaframeflowNumTimesteps">Sampling Timesteps</label>
                                            <input type="number" id="rnaframeflowNumTimesteps" min="10" max="200" value="50" placeholder="50">
                                            <small>Number of timesteps for sampling (10-200)</small>
                                        </div>
                                        <div class="parameter-group">
                                            <label for="rnaframeflowMinT">Minimum Time</label>
                                            <input type="number" id="rnaframeflowMinT" min="0.001" max="0.1" step="0.001" value="0.01" placeholder="0.01">
                                            <small>Minimum time step for interpolation (0.001-0.1)</small>
                                        </div>
                                        <div class="parameter-group">
                                            <label for="rnaframeflowExpRate">Exponential Rate</label>
                                            <input type="number" id="rnaframeflowExpRate" min="1" max="50" value="10" placeholder="10">
                                            <small>Exponential rate for sampling schedule (1-50)</small>
                                        </div>
                                        <div class="parameter-group">
                                            <label for="rnaframeflowSelfCondition">Self-Conditioning</label>
                                            <select id="rnaframeflowSelfCondition">
                                                <option value="true">Enabled</option>
                                                <option value="false">Disabled</option>
                                            </select>
                                            <small>Enable self-conditioning during sampling</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                        <div class="action-buttons">
                            <button class="btn btn-primary btn-lg" id="runAnalysisBtn" onclick="runAnalysis()">
                                <i class="fas fa-play"></i>
                                <span>Start Analysis</span>
                            </button>
                            <button class="btn btn-outline-secondary" onclick="clearInputs()">
                                <i class="fas fa-eraser"></i>
                                <span>Clear Input</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Display Section - Now positioned below input section -->
            <div class="result-section" id="resultSection" style="display: none;">
                <div class="result-card">
                    <div class="card-header">
                        <i class="fas fa-chart-bar"></i>
                        <h5>Analysis Results</h5>
                    </div>
                    <div class="card-body">
                        <div id="resultContent">
                            <div class="no-results-placeholder">
                                <i class="fas fa-chart-line"></i>
                                <p>No results yet. Run an analysis to see results here.</p>
                            </div>
                        </div>
                        <div id="downloadActions" class="download-actions" style="display: none;">
                            <button class="btn btn-primary" onclick="downloadAllResults()">
                                <i class="fas fa-download"></i> Download Results
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History Section -->
            <div class="history-section" id="historySection" style="display: none;">
                <div class="history-card">
                    <div class="card-header">
                        <i class="fas fa-history"></i>
                        <h5>Analysis History</h5>
                        <div class="header-actions">
                            <button class="btn btn-sm btn-outline-danger" onclick="clearHistory()">
                                <i class="fas fa-trash"></i> Clear
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="historyContent">
                            <!-- History content will be generated dynamically via JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Indicator -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-content">
            <div class="loading-spinner">
                <div class="spinner"></div>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer" class="notification-container"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Markdown rendering libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.3.0/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <!-- JSZip library for ZIP file creation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <!-- Custom JS -->
    <script src="/static/js/app.js"></script>
    <script>
        // Application will be initialized by app.js
    </script>
</body>
</html>
